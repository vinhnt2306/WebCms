<h2>Đơn hàng</h2>
<div class="row g-2">
    <div class="col-sm-4">
        <input type="text" class="form-control" placeholder="Mã đơn hàng" />
    </div>
    <div class="col-sm-4">
        <select class="form-select">
            <option value="money">Số tiền đã chi giảm dần</option>
            <option value="money desc">Số tiền đã chi tăng dần</option>
            <option value="order">Đơn hàng gần đây nhất</option>
        </select>
    </div>
    <div class="col-sm-4">
        <select class="form-select">
            <option value="1">Đã phê duyệt</option>
            <option value="2">Từ chối</option>
            <option value="2">vv</option>
            <!-- Các options khác -->
        </select>
    </div>
    <div class="col-sm-8">
        <input type="date" class="form-control" placeholder="Từ ngày - Đến ngày" />
    </div>
    <div class="col-sm-4">
        <div class="d-flex align-items-center">
            <button class="btn btn-primary me-2">
                <i class="bi bi-search"></i> Tìm kiếm
            </button>
            <i class="bi bi-arrow-repeat" style="font-size: 20px; color: #1890FF; cursor: pointer;"></i>
        </div>
    </div>
</div>
<br>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Mã đơn hàng</th>
            <th scope="col">Ngày tạo</th>
            <th scope="col">Khách hàng</th>
            <th scope="col">Tổng sản phẩm</th>
            <th scope="col">Thành tiền</th>
            <th scope="col">Trạng thái đơn hàng</th>
            <th scope="col">Hành động</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let ord of lstOrder; let i = index">
            <th scope="row">{{ord.id}}</th>
            <th scope="row">{{ord.code}}</th>
            <th scope="row">{{ord.createDate | date:'yyyy-MM-dd HH:mm:ss' }}</th>
            <th scope="row">{{ord.nameCustomer}}</th>
            <th scope="row">{{i}}sp</th>
            <th scope="row">{{ord.totalAmount + ord.amountShip | currency:'VND': 'symbol':'1.0-0' | slice: 1}}đ</th>
            <th scope="row">
                <div [innerHTML]="GenStatus(ord.status)" [ngClass]="GenClassStatus(ord.status)"></div>
            </th>
            <th scope="row">
                <button type="button" class="btn btn-primary" (click)="createOderGHN(ord.id)">
                    Giao hàng
                </button>
                <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalchangeSTT"
                    (click)="openMoup(ord.status,ord.id)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-alexa" viewBox="0 0 16 16">
                        <path
                            d="M7.996 0A7.998 7.998 0 0 0 0 8a8 8 0 0 0 6.93 7.93v-1.613a1.06 1.06 0 0 0-.717-1.008A5.602 5.602 0 0 1 2.4 7.865 5.579 5.579 0 0 1 8.054 2.4a5.599 5.599 0 0 1 5.535 5.81l-.002.046a6.116 6.116 0 0 1-.012.192l-.005.061a4.85 4.85 0 0 1-.033.284l-.01.068c-.685 4.516-6.564 7.054-6.596 7.068A7.998 7.998 0 0 0 15.992 8 7.998 7.998 0 0 0 7.996.001Z" />
                    </svg>Chuyển đổi change
                </button> -->
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal"
                    (click)="openMoup(ord.status,ord.id)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-alexa" viewBox="0 0 16 16">
                        <path
                            d="M7.996 0A7.998 7.998 0 0 0 0 8a8 8 0 0 0 6.93 7.93v-1.613a1.06 1.06 0 0 0-.717-1.008A5.602 5.602 0 0 1 2.4 7.865 5.579 5.579 0 0 1 8.054 2.4a5.599 5.599 0 0 1 5.535 5.81l-.002.046a6.116 6.116 0 0 1-.012.192l-.005.061a4.85 4.85 0 0 1-.033.284l-.01.068c-.685 4.516-6.564 7.054-6.596 7.068A7.998 7.998 0 0 0 15.992 8 7.998 7.998 0 0 0 7.996.001Z" />
                    </svg>Chuyển đổi trạng thái
                </button>
            </th>
        </tr>
    </tbody>
</table>
<div class="modal fade" id="modalchangeSTT" tabindex="-1" aria-labelledby="modalchangeSTT" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="modalchangeSTT">Chuyển đổi trạng thái đơn hàng</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form #form="ngForm" (ngSubmit)="onChangeStatus()">
                    <select class="form-select" name="cars" id="cars" [(ngModel)]="idStatus">
                        <option [value]="3">đã hủy đơn</option>
                        <option [value]="4">trả hàng</option>
                        <option [value]="5">trả hàng 1 phần </option>
                        <option [value]="6">hóa đơn mới tạo, trong thời gian đổi trả.</option>
                        <option [value]="7">giao thành công</option>
                    </select>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="submit" class="btn btn-primary">Lưu</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Modal cũ -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="exampleModalLabel">Chuyển đổi trạng thái đơn hàng</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form (ngSubmit)="onSubmit()" #form="ngForm">
                    <select class="form-select" name="cars" id="cars" [(ngModel)]="idStatus">
                        <option *ngFor="let cbo of comboStatus" [value]="cbo.id">
                            {{cbo.value}}
                        </option>
                    </select>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="submit" class="btn btn-primary" [disabled]="comboStatus.length === 0">Lưu</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>